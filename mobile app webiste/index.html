<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Campus Safety Admin</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/charts.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h2>Campus<span>Safety</span></h2>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="sidebar-user">
            <div class="user-avatar">
                <img src="https://ui-avatars.com/api/?name=Admin+User&background=4F46E5&color=fff" alt="Admin">
            </div>
            <div class="user-info">
                <h4>Admin User</h4>
                <p>Super Administrator</p>
            </div>
            <div class="user-status online"></div>
        </div>

        <ul class="sidebar-menu">
            <li class="active">
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="incidents.html">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Incidents</span>
                    <span class="badge badge-danger" id="pendingCount">12</span>
                </a>
            </li>
            <li>
                <a href="users.html">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                    <span class="badge badge-info" id="userCount">456</span>
                </a>
            </li>
            <li>
                <a href="map.html">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Map View</span>
                </a>
            </li>
            <li>
                <a href="analytics.html">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
            </li>
            <li>
                <a href="settings.html">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
        </ul>

        <div class="sidebar-footer">
            <div class="system-status">
                <div class="status-indicator active"></div>
                <span>System Online</span>
            </div>
            <button class="btn-logout" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <h1>Dashboard Overview</h1>
                <p class="subtitle">Welcome back! Here's what's happening today.</p>
            </div>

            <div class="header-right">
                <div class="date-display">
                    <i class="far fa-calendar"></i>
                    <span id="currentDate">December 18, 2025</span>
                </div>
                <div class="header-actions">
                    <div class="dropdown notification-dropdown">
                        <button class="btn-notification" id="notificationBtn">
                            <i class="far fa-bell"></i>
                            <span class="notification-count">3</span>
                        </button>
                        <div class="dropdown-menu notification-menu">
                            <div class="notification-header">
                                <h4>Notifications</h4>
                                <button class="mark-all-read">Mark all read</button>
                            </div>
                            <div class="notification-list">
                                <div class="notification-item unread">
                                    <div class="notification-icon warning">
                                        <i class="fas fa-exclamation"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p>New high-severity incident reported</p>
                                        <small>2 minutes ago</small>
                                    </div>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-icon info">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p>5 new users registered today</p>
                                        <small>1 hour ago</small>
                                    </div>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-icon success">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    <div class="notification-content">
                                        <p>System backup completed successfully</p>
                                        <small>3 hours ago</small>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#">View all notifications</a>
                            </div>
                        </div>
                    </div>
                    <button class="btn-quick-add" id="quickReportBtn">
                        <i class="fas fa-plus"></i> New Report
                    </button>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <section class="stats-grid" id="statsGrid">
            <!-- Stats loaded by JavaScript -->
        </section>

        <!-- Charts and Tables Section -->
        <section class="content-grid">
            <!-- Recent Incidents Table -->
            <div class="content-card wide">
                <div class="card-header">
                    <h3><i class="fas fa-list-ul"></i> Recent Incidents</h3>
                    <a href="incidents.html" class="btn-view-all">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="data-table" id="recentIncidentsTable">
                        <!-- Loaded by JavaScript -->
                    </table>
                </div>
            </div>

            <!-- Incident Categories Chart -->
            <div class="content-card">
                <div class="card-header">
                    <h3><i class="fas fa-chart-pie"></i> Incident Categories</h3>
                </div>
                <div class="chart-container">
                    <canvas id="categoryChart" width="400" height="300"></canvas>
                </div>
            </div>

            <!-- Weekly Trend Chart -->
            <div class="content-card">
                <div class="card-header">
                    <h3><i class="fas fa-chart-line"></i> Weekly Trend</h3>
                </div>
                <div class="chart-container">
                    <canvas id="trendChart" width="400" height="300"></canvas>
                </div>
            </div>

            <!-- Activity Timeline -->
            <div class="content-card wide">
                <div class="card-header">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                </div>
                <div class="timeline" id="activityTimeline">
                    <!-- Loaded by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <!-- Quick Report Modal -->
    <div class="modal" id="quickReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Report New Incident</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="quickReportForm">
                    <div class="form-group">
                        <label for="incidentTitle">Title *</label>
                        <input type="text" id="incidentTitle" placeholder="Brief description" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="incidentCategory">Category</label>
                            <select id="incidentCategory">
                                <option value="hazard">Hazard</option>
                                <option value="security">Security</option>
                                <option value="maintenance">Maintenance</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="incidentSeverity">Severity</label>
                            <select id="incidentSeverity">
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="incidentDescription">Description</label>
                        <textarea id="incidentDescription" rows="3" placeholder="Detailed description..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="incidentLocation">Location</label>
                        <input type="text" id="incidentLocation" placeholder="Building, room, or area">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">Cancel</button>
                <button class="btn btn-primary" id="submitReportBtn">Submit Report</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="js/app.js"></script>
    <script src="js/incidents.js"></script>
</html>